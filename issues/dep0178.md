# dirent.path

## Description

Since `dirent.path` is deprecated (DEP0178) and has reached End-of-Life status, we should provide a codemod to replace it.

- The codemod should replace `dirent.path` with `dirent.parentPath`.
- The codemod should handle fs.readdir operations that use the withFileTypes option.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should preserve the overall directory traversal logic.

## Additional Information

Note that `dirent.path` was deprecated and reached End-of-Life status in Node.js v24.0.0. The property was deprecated because it was renamed to `dirent.parentPath` for better clarity about what the property represents. Instead of `dirent.path`, developers should use `dirent.parentPath`.

The `dirent.path` property provided the path to the parent directory of the directory entry, and `dirent.parentPath` provides the same functionality with a more descriptive name.

## Examples

### Example 1: Basic dirent.path usage

**Before:**

```js
const fs = require("node:fs");
fs.readdir("/tmp", { withFileTypes: true }, (err, dirents) => {
  dirents.forEach(dirent => {
    console.log(dirent.path, dirent.name);
  });
});
```

**After:**

```js
const fs = require("node:fs");
fs.readdir("/tmp", { withFileTypes: true }, (err, dirents) => {
  dirents.forEach(dirent => {
    console.log(dirent.parentPath, dirent.name);
  });
});
```

### Example 2: Synchronous readdir with path

**Before:**

```js
const fs = require("node:fs");
const dirents = fs.readdirSync("/home", { withFileTypes: true });
for (const dirent of dirents) {
  const fullPath = `${dirent.path}/${dirent.name}`;
  console.log(fullPath);
}
```

**After:**

```js
const fs = require("node:fs");
const dirents = fs.readdirSync("/home", { withFileTypes: true });
for (const dirent of dirents) {
  const fullPath = `${dirent.parentPath}/${dirent.name}`;
  console.log(fullPath);
}
```

### Example 3: Recursive directory traversal

**Before:**

```js
const fs = require("node:fs");
const path = require("node:path");
function traverseDir(dirPath) {
  const dirents = fs.readdirSync(dirPath, { withFileTypes: true });
  return dirents.map(dirent => ({
    name: dirent.name,
    path: dirent.path,
    isDirectory: dirent.isDirectory()
  }));
}
```

**After:**

```js
const fs = require("node:fs");
const path = require("node:path");
function traverseDir(dirPath) {
  const dirents = fs.readdirSync(dirPath, { withFileTypes: true });
  return dirents.map(dirent => ({
    name: dirent.name,
    path: dirent.parentPath,
    isDirectory: dirent.isDirectory()
  }));
}
```

### Example 4: Promise-based readdir

**Before:**

```js
const fs = require("node:fs").promises;
async function listFiles(directory) {
  const dirents = await fs.readdir(directory, { withFileTypes: true });
  return dirents.filter(dirent => dirent.isFile())
                .map(dirent => `${dirent.path}/${dirent.name}`);
}
```

**After:**

```js
const fs = require("node:fs").promises;
async function listFiles(directory) {
  const dirents = await fs.readdir(directory, { withFileTypes: true });
  return dirents.filter(dirent => dirent.isFile())
                .map(dirent => `${dirent.parentPath}/${dirent.name}`);
}
```

### Example 5: ESM import usage

**Before:**

```js
import { readdir } from "node:fs/promises";
const dirents = await readdir("./src", { withFileTypes: true });
const paths = dirents.map(d => `${d.path}/${d.name}`);
```

**After:**

```js
import { readdir } from "node:fs/promises";
const dirents = await readdir("./src", { withFileTypes: true });
const paths = dirents.map(d => `${d.parentPath}/${d.name}`);
```

### Example 6: File type checking with path

**Before:**

```js
const fs = require("node:fs");
fs.readdir("./data", { withFileTypes: true }, (err, dirents) => {
  const files = dirents.filter(d => d.isFile())
                      .map(d => ({ name: d.name, parent: d.path }));
  console.log(files);
});
```

**After:**

```js
const fs = require("node:fs");
fs.readdir("./data", { withFileTypes: true }, (err, dirents) => {
  const files = dirents.filter(d => d.isFile())
                      .map(d => ({ name: d.name, parent: d.parentPath }));
  console.log(files);
});
```

## Refs

- [DEP0178: `dirent.path`](https://nodejs.org/api/deprecations.html#dep0178)