# Instantiating node:zlib classes without new

## Description

Since instantiating `node:zlib` classes without `new` is deprecated (DEP0184) and has reached Runtime status, we should provide a codemod to replace it.

- The codemod should add `new` keyword when instantiating zlib classes without it.
- The codemod should handle all zlib classes: `Deflate`, `DeflateRaw`, `Gunzip`, `Gzip`, `Inflate`, `InflateRaw`, `Unzip`, and `BrotliCompress`, `BrotliDecompress`.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should preserve any constructor arguments and assignments.

## Additional Information

Note that instantiating `node:zlib` classes without the `new` qualifier was deprecated and reached Runtime status in Node.js v24.0.0. The deprecation was introduced because calling class constructors without `new` can lead to unexpected behavior and is not consistent with standard JavaScript class instantiation patterns. Instead of calling constructors directly, developers should use the `new` keyword when instantiating zlib classes.

The affected classes include compression and decompression classes like `Deflate`, `DeflateRaw`, `Gunzip`, `Gzip`, `Inflate`, `InflateRaw`, `Unzip`, `BrotliCompress`, and `BrotliDecompress`.

## Examples

### Example 1: Gzip instantiation

**Before:**

```js
const zlib = require("node:zlib");
const gzip = zlib.Gzip();
```

**After:**

```js
const zlib = require("node:zlib");
const gzip = new zlib.Gzip();
```

### Example 2: Gunzip with options

**Before:**

```js
const { Gunzip } = require("node:zlib");
const gunzip = Gunzip({ level: 6 });
```

**After:**

```js
const { Gunzip } = require("node:zlib");
const gunzip = new Gunzip({ level: 6 });
```

### Example 3: Deflate instantiation

**Before:**

```js
const zlib = require("node:zlib");
const deflate = zlib.Deflate({ chunkSize: 1024 });
```

**After:**

```js
const zlib = require("node:zlib");
const deflate = new zlib.Deflate({ chunkSize: 1024 });
```

### Example 4: BrotliCompress instantiation

**Before:**

```js
const zlib = require("node:zlib");
const brotli = zlib.BrotliCompress();
```

**After:**

```js
const zlib = require("node:zlib");
const brotli = new zlib.BrotliCompress();
```

### Example 5: ESM import usage

**Before:**

```js
import { Inflate, Deflate } from "node:zlib";
const inflate = Inflate();
const deflate = Deflate();
```

**After:**

```js
import { Inflate, Deflate } from "node:zlib";
const inflate = new Inflate();
const deflate = new Deflate();
```

### Example 6: Multiple classes in pipeline

**Before:**

```js
const zlib = require("node:zlib");
const input = fs.createReadStream("input.txt");
const gzip = zlib.Gzip();
const output = fs.createWriteStream("output.gz");
input.pipe(gzip).pipe(output);
```

**After:**

```js
const zlib = require("node:zlib");
const input = fs.createReadStream("input.txt");
const gzip = new zlib.Gzip();
const output = fs.createWriteStream("output.gz");
input.pipe(gzip).pipe(output);
```

## Refs

- [DEP0184: Instantiating `node:zlib` classes without `new`](https://nodejs.org/api/deprecations.html#dep0184)