# crypto.fips

## Description

Since `crypto.fips` is deprecated (DEP0093) and has reached Runtime status, we should provide a codemod to replace it.

- The codemod should replace `crypto.fips` with `crypto.getFips()` and `crypto.setFips()`.
- The codemod should handle both getter and setter usage patterns.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should preserve FIPS mode configuration logic.

## Additional Information

Note that `crypto.fips` was deprecated and reached Runtime status in Node.js v23.0.0. The property was deprecated because it was replaced with dedicated getter and setter functions `crypto.getFips()` and `crypto.setFips()` for better API consistency and to make FIPS mode changes more explicit. Instead of using the `crypto.fips` property, developers should use the appropriate function calls.

The `crypto.fips` property allowed both reading and writing FIPS mode status, but the new API separates these concerns into distinct function calls for clarity and better error handling.

## Examples

### Example 1: Reading FIPS status

**Before:**

```js
const crypto = require("node:crypto");
if (crypto.fips) {
  console.log("FIPS mode is enabled");
}
```

**After:**

```js
const crypto = require("node:crypto");
if (crypto.getFips()) {
  console.log("FIPS mode is enabled");
}
```

### Example 2: Setting FIPS mode

**Before:**

```js
const crypto = require("node:crypto");
crypto.fips = true;
```

**After:**

```js
const crypto = require("node:crypto");
crypto.setFips(true);
```

### Example 3: Conditional FIPS configuration

**Before:**

```js
const crypto = require("node:crypto");
if (process.env.ENABLE_FIPS === "true") {
  crypto.fips = true;
}
console.log("FIPS enabled:", crypto.fips);
```

**After:**

```js
const crypto = require("node:crypto");
if (process.env.ENABLE_FIPS === "true") {
  crypto.setFips(true);
}
console.log("FIPS enabled:", crypto.getFips());
```

### Example 4: FIPS status function

**Before:**

```js
const crypto = require("node:crypto");
function isFipsEnabled() {
  return crypto.fips;
}
```

**After:**

```js
const crypto = require("node:crypto");
function isFipsEnabled() {
  return crypto.getFips();
}
```

### Example 5: ESM import usage

**Before:**

```js
import crypto from "node:crypto";
const fipsStatus = crypto.fips;
crypto.fips = !fipsStatus;
```

**After:**

```js
import crypto from "node:crypto";
const fipsStatus = crypto.getFips();
crypto.setFips(!fipsStatus);
```

### Example 6: Configuration object

**Before:**

```js
const crypto = require("node:crypto");
const config = {
  fips: crypto.fips,
  algorithms: crypto.getHashes()
};

function updateConfig(newFips) {
  crypto.fips = newFips;
  config.fips = crypto.fips;
}
```

**After:**

```js
const crypto = require("node:crypto");
const config = {
  fips: crypto.getFips(),
  algorithms: crypto.getHashes()
};

function updateConfig(newFips) {
  crypto.setFips(newFips);
  config.fips = crypto.getFips();
}
```

## Refs

- [DEP0093: `crypto.fips`](https://nodejs.org/api/deprecations.html#dep0093)