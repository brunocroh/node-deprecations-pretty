# util.isBuffer()

## Description

Since `util.isBuffer()` is deprecated (DEP0046) and has reached End-of-Life status, we should provide a codemod to replace it.

- The codemod should replace `util.isBuffer(value)` with `Buffer.isBuffer(value)`.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should remove unused util imports when no other util functions are used.
- The codemod should preserve any comments and variable assignments.

## Additional Information

Note that `util.isBuffer()` was removed in Node.js v23.0.0. The function was deprecated because it was part of the util.is* family of type-checking functions that had issues requiring backward-incompatible changes to fix properly. Instead of `util.isBuffer()`, developers should use `Buffer.isBuffer()`.

The `util.isBuffer()` function returned true if the given object was a Buffer instance, otherwise returned false. The built-in `Buffer.isBuffer()` provides the same functionality with better performance and consistency.

## Examples

### Example 1: Basic isBuffer usage

**Before:**

```js
const util = require("node:util");
if (util.isBuffer(data)) {
  console.log("It's a buffer");
}
```

**After:**

```js
if (Buffer.isBuffer(data)) {
  console.log("It's a buffer");
}
```

### Example 2: Destructured import

**Before:**

```js
const { isBuffer } = require("node:util");
const result = isBuffer(input);
```

**After:**

```js
const result = Buffer.isBuffer(input);
```

### Example 3: ESM import

**Before:**

```js
import { isBuffer } from "node:util";
const valid = isBuffer(chunk);
```

**After:**

```js
const valid = Buffer.isBuffer(chunk);
```

### Example 4: Function usage

**Before:**

```js
const util = require("node:util");
function validateBuffer(val) {
  return util.isBuffer(val);
}
```

**After:**

```js
function validateBuffer(val) {
  return Buffer.isBuffer(val);
}
```

### Example 5: Conditional expression

**Before:**

```js
const util = require("node:util");
const type = util.isBuffer(data) ? "buffer" : "other";
```

**After:**

```js
const type = Buffer.isBuffer(data) ? "buffer" : "other";
```

### Example 6: Array filter usage

**Before:**

```js
const util = require("node:util");
const buffers = array.filter(util.isBuffer);
```

**After:**

```js
const buffers = array.filter(Buffer.isBuffer);
```

## Refs

- [DEP0046: `util.isBuffer()`](https://nodejs.org/api/deprecations.html#dep0046)