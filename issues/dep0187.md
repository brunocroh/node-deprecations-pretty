# Passing invalid argument types to fs.existsSync

## Description

Since passing invalid argument types to `fs.existsSync` is deprecated (DEP0187) and has reached Runtime status, we should provide a codemod to replace it.

- The codemod should validate that `fs.existsSync` receives string, Buffer, or URL arguments only.
- The codemod should convert invalid argument types to valid ones where possible.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should add type checks or conversions to ensure argument validity.

## Additional Information

Note that passing invalid argument types to `fs.existsSync` was deprecated and reached Runtime status in Node.js v24.0.0. The function now only accepts string, Buffer, or URL arguments, and passing other types (like numbers, objects, or other invalid types) will cause deprecation warnings or errors. Instead of passing invalid argument types, developers should ensure they pass only valid path representations.

This deprecation improves type safety and prevents common programming errors where invalid path types could lead to unexpected behavior.

## Examples

### Example 1: Convert number to string

**Before:**

```js
const fs = require("node:fs");
const exists = fs.existsSync(123);
```

**After:**

```js
const fs = require("node:fs");
const exists = fs.existsSync(String(123));
```

### Example 2: Add type validation

**Before:**

```js
const fs = require("node:fs");
function checkFile(path) {
  return fs.existsSync(path);
}
```

**After:**

```js
const fs = require("node:fs");
function checkFile(path) {
  if (typeof path !== "string" && !Buffer.isBuffer(path) && !(path instanceof URL)) {
    throw new TypeError("Path must be a string, Buffer, or URL");
  }
  return fs.existsSync(path);
}
```

### Example 3: Convert object to string path

**Before:**

```js
const fs = require("node:fs");
const pathObj = { pathname: "/tmp/file.txt" };
const exists = fs.existsSync(pathObj);
```

**After:**

```js
const fs = require("node:fs");
const pathObj = { pathname: "/tmp/file.txt" };
const exists = fs.existsSync(pathObj.pathname);
```

### Example 4: Handle URL objects properly

**Before:**

```js
const fs = require("node:fs");
const pathString = "file:///tmp/test.txt";
const exists = fs.existsSync(pathString);
```

**After:**

```js
const fs = require("node:fs");
const url = new URL("file:///tmp/test.txt");
const exists = fs.existsSync(url);
```

### Example 5: ESM import with validation

**Before:**

```js
import { existsSync } from "node:fs";
const exists = existsSync(null);
```

**After:**

```js
import { existsSync } from "node:fs";
if (path != null) {
  const exists = existsSync(String(path));
}
```

### Example 6: Array to first element conversion

**Before:**

```js
const fs = require("node:fs");
const paths = ["/tmp/file1.txt", "/tmp/file2.txt"];
const exists = fs.existsSync(paths);
```

**After:**

```js
const fs = require("node:fs");
const paths = ["/tmp/file1.txt", "/tmp/file2.txt"];
const exists = fs.existsSync(paths[0]);
```

## Refs

- [DEP0187: Passing invalid argument types to `fs.existsSync`](https://nodejs.org/api/deprecations.html#dep0187)