# require('node:_stream_*')

## Description

Since `require('node:_stream_*')` modules are deprecated (DEP0193) and have reached Documentation-only status, we should provide a codemod to replace them.

- The codemod should replace internal stream module imports with the public `node:stream` module.
- The codemod should handle all internal stream modules: `_stream_duplex`, `_stream_passthrough`, `_stream_readable`, `_stream_transform`, `_stream_wrap`, and `_stream_writable`.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should use named imports from `node:stream` instead of internal modules.

## Additional Information

Note that the internal stream modules were deprecated in Node.js v24.2.0. These modules (`node:_stream_duplex`, `node:_stream_passthrough`, `node:_stream_readable`, `node:_stream_transform`, `node:_stream_wrap`, and `node:_stream_writable`) are deprecated because they should be considered an internal Node.js implementation rather than a public-facing API. Instead of using these internal modules, developers should use the public `node:stream` module.

The internal stream modules were never intended for public use and accessing them directly bypasses the official API boundaries that Node.js maintains.

## Examples

### Example 1: Replace _stream_readable

**Before:**

```js
const Readable = require("node:_stream_readable");
class MyReadable extends Readable {
  _read() {
    this.push("data");
  }
}
```

**After:**

```js
const { Readable } = require("node:stream");
class MyReadable extends Readable {
  _read() {
    this.push("data");
  }
}
```

### Example 2: Replace _stream_writable

**Before:**

```js
const Writable = require("node:_stream_writable");
const myWritable = new Writable({
  write(chunk, encoding, callback) {
    console.log(chunk.toString());
    callback();
  }
});
```

**After:**

```js
const { Writable } = require("node:stream");
const myWritable = new Writable({
  write(chunk, encoding, callback) {
    console.log(chunk.toString());
    callback();
  }
});
```

### Example 3: Replace _stream_duplex

**Before:**

```js
const Duplex = require("node:_stream_duplex");
class MyDuplex extends Duplex {
  _read() {}
  _write(chunk, encoding, callback) {
    callback();
  }
}
```

**After:**

```js
const { Duplex } = require("node:stream");
class MyDuplex extends Duplex {
  _read() {}
  _write(chunk, encoding, callback) {
    callback();
  }
}
```

### Example 4: Replace _stream_transform

**Before:**

```js
const Transform = require("node:_stream_transform");
const upperCase = new Transform({
  transform(chunk, encoding, callback) {
    callback(null, chunk.toString().toUpperCase());
  }
});
```

**After:**

```js
const { Transform } = require("node:stream");
const upperCase = new Transform({
  transform(chunk, encoding, callback) {
    callback(null, chunk.toString().toUpperCase());
  }
});
```

### Example 5: ESM import usage

**Before:**

```js
import Readable from "node:_stream_readable";
import Writable from "node:_stream_writable";
```

**After:**

```js
import { Readable, Writable } from "node:stream";
```

### Example 6: Replace _stream_passthrough

**Before:**

```js
const PassThrough = require("node:_stream_passthrough");
const pass = new PassThrough();
```

**After:**

```js
const { PassThrough } = require("node:stream");
const pass = new PassThrough();
```

## Refs

- [DEP0193: `require('node:_stream_*')`](https://nodejs.org/api/deprecations.html#dep0193)