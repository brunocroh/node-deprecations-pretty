# HTTP/2 priority signaling

## Description

Since HTTP/2 priority signaling is deprecated (DEP0194) and has reached End-of-Life status, we should provide a codemod to replace it.

- The codemod should remove HTTP/2 priority-related options and methods.
- The codemod should handle priority parameters in HTTP/2 stream creation.
- The codemod should remove weight and dependency settings in HTTP/2 streams.
- The codemod should handle both CommonJS and ESM imports.

## Additional Information

Note that HTTP/2 priority signaling was deprecated and reached End-of-Life in Node.js v24.2.0. The support for priority signaling has been removed following its deprecation in RFC 9113. Priority signaling in HTTP/2 was found to be problematic and has been deprecated in the HTTP/2 specification itself. Instead of using priority signaling, developers should rely on other mechanisms for managing request priorities or consider migrating to HTTP/3 which has improved priority handling.

The HTTP/2 priority system was complex and often misunderstood, leading to suboptimal performance in many implementations.

## Examples

### Example 1: Remove priority options from createHttp2Session

**Before:**

```js
const http2 = require("node:http2");
const session = http2.connect("https://example.com", {
  priority: {
    weight: 16,
    parent: 0,
    exclusive: false
  }
});
```

**After:**

```js
const http2 = require("node:http2");
const session = http2.connect("https://example.com");
```

### Example 2: Remove priority from stream creation

**Before:**

```js
const http2 = require("node:http2");
const stream = session.request({
  ":path": "/data",
  ":method": "GET"
}, {
  weight: 256,
  parent: 0
});
```

**After:**

```js
const http2 = require("node:http2");
const stream = session.request({
  ":path": "/data",
  ":method": "GET"
});
```

### Example 3: Remove priority method calls

**Before:**

```js
const http2 = require("node:http2");
stream.priority({
  weight: 16,
  parent: 3,
  exclusive: true
});
```

**After:**

```js
const http2 = require("node:http2");
// Priority signaling has been removed - consider alternative approaches
```

### Example 4: Remove weight and dependency settings

**Before:**

```js
const http2 = require("node:http2");
const server = http2.createServer();
server.on("stream", (stream) => {
  stream.respond({ ":status": 200 }, { weight: 8 });
});
```

**After:**

```js
const http2 = require("node:http2");
const server = http2.createServer();
server.on("stream", (stream) => {
  stream.respond({ ":status": 200 });
});
```

### Example 5: ESM import usage

**Before:**

```js
import { connect } from "node:http2";
const session = connect("https://example.com");
const stream = session.request({}, { weight: 64, exclusive: false });
```

**After:**

```js
import { connect } from "node:http2";
const session = connect("https://example.com");
const stream = session.request({});
```

### Example 6: Remove priority event handlers

**Before:**

```js
const http2 = require("node:http2");
stream.on("priority", (weight, parent, exclusive) => {
  console.log("Priority changed:", weight, parent, exclusive);
});
```

**After:**

```js
const http2 = require("node:http2");
// Priority events are no longer available
```

## Refs

- [DEP0194: HTTP/2 priority signaling](https://nodejs.org/api/deprecations.html#dep0194)