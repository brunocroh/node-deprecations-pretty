# repl.builtinModules

## Description

Since `repl.builtinModules` is deprecated (DEP0191) and has reached Documentation-only status with `--pending-deprecation` support, we should provide a codemod to replace it.

- The codemod should replace `repl.builtinModules` with `require('node:module').builtinModules`.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should update import statements to include the module module when needed.
- The codemod should preserve any usage patterns and variable assignments.

## Additional Information

Note that `repl.builtinModules` was deprecated in Node.js v24.0.0. The `node:repl` module exports a `builtinModules` property that contains an array of built-in modules, but this was incomplete and matched the already deprecated `repl._builtinLibs` (DEP0142). Instead of using `repl.builtinModules`, developers should rely upon `require('node:module').builtinModules`.

The `repl.builtinModules` property was never intended to be the primary way to access the list of built-in modules, and the module module provides the authoritative and complete list.

## Examples

### Example 1: Basic repl.builtinModules usage

**Before:**

```js
const repl = require("node:repl");
const modules = repl.builtinModules;
```

**After:**

```js
const { builtinModules } = require("node:module");
const modules = builtinModules;
```

### Example 2: Direct property access

**Before:**

```js
const repl = require("node:repl");
console.log(repl.builtinModules.includes("fs"));
```

**After:**

```js
const { builtinModules } = require("node:module");
console.log(builtinModules.includes("fs"));
```

### Example 3: Destructured import with other repl features

**Before:**

```js
const { builtinModules, start } = require("node:repl");
const replServer = start();
console.log(builtinModules);
```

**After:**

```js
const { start } = require("node:repl");
const { builtinModules } = require("node:module");
const replServer = start();
console.log(builtinModules);
```

### Example 4: ESM import usage

**Before:**

```js
import { builtinModules } from "node:repl";
const coreModules = builtinModules;
```

**After:**

```js
import { builtinModules } from "node:module";
const coreModules = builtinModules;
```

### Example 5: Function parameter usage

**Before:**

```js
const repl = require("node:repl");
function checkModule(name) {
  return repl.builtinModules.includes(name);
}
```

**After:**

```js
const { builtinModules } = require("node:module");
function checkModule(name) {
  return builtinModules.includes(name);
}
```

### Example 6: Variable assignment and filtering

**Before:**

```js
const repl = require("node:repl");
const coreModules = repl.builtinModules.filter(mod => !mod.startsWith("_"));
```

**After:**

```js
const { builtinModules } = require("node:module");
const coreModules = builtinModules.filter(mod => !mod.startsWith("_"));
```

## Refs

- [DEP0191: `repl.builtinModules`](https://nodejs.org/api/deprecations.html#dep0191)