# util.isError()

## Description

Since `util.isError()` is deprecated (DEP0048) and has reached End-of-Life status, we should provide a codemod to replace it.

- The codemod should replace `util.isError(value)` with `value instanceof Error`.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should remove unused util imports when no other util functions are used.
- The codemod should preserve any comments and variable assignments.

## Additional Information

Note that `util.isError()` was removed in Node.js v23.0.0. The function was deprecated because it was part of the util.is* family of type-checking functions that had issues requiring backward-incompatible changes to fix properly. Instead of `util.isError()`, developers should use `value instanceof Error`.

The `util.isError()` function returned true if the given value was an Error object, and the `instanceof` operator provides the same functionality with better performance and consistency.

## Examples

### Example 1: Basic isError usage

**Before:**

```js
const util = require("node:util");
if (util.isError(result)) {
  console.log("An error occurred:", result.message);
}
```

**After:**

```js
if (result instanceof Error) {
  console.log("An error occurred:", result.message);
}
```

### Example 2: Destructured import

**Before:**

```js
const { isError } = require("node:util");
const hasError = isError(response);
```

**After:**

```js
const hasError = response instanceof Error;
```

### Example 3: ESM import

**Before:**

```js
import { isError } from "node:util";
const valid = isError(exception);
```

**After:**

```js
const valid = exception instanceof Error;
```

### Example 4: Function usage

**Before:**

```js
const util = require("node:util");
function handleResult(val) {
  if (util.isError(val)) {
    throw val;
  }
  return val;
}
```

**After:**

```js
function handleResult(val) {
  if (val instanceof Error) {
    throw val;
  }
  return val;
}
```

### Example 5: Conditional expression

**Before:**

```js
const util = require("node:util");
const type = util.isError(data) ? "error" : "success";
```

**After:**

```js
const type = data instanceof Error ? "error" : "success";
```

### Example 6: Array filter usage

**Before:**

```js
const util = require("node:util");
const errors = results.filter(util.isError);
```

**After:**

```js
const errors = results.filter(item => item instanceof Error);
```

## Refs

- [DEP0048: `util.isError()`](https://nodejs.org/api/deprecations.html#dep0048)