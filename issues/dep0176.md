# fs.F_OK, fs.R_OK, fs.W_OK, fs.X_OK

## Description

Since `fs.F_OK`, `fs.R_OK`, `fs.W_OK`, `fs.X_OK` constants are deprecated (DEP0176) and have reached Runtime status, we should provide a codemod to replace them.

- The codemod should replace `fs.F_OK`, `fs.R_OK`, `fs.W_OK`, `fs.X_OK` with `fs.constants.F_OK`, `fs.constants.R_OK`, `fs.constants.W_OK`, `fs.constants.X_OK`.
- The codemod should handle both CommonJS and ESM imports.
- The codemod should update access() calls and other fs operations using these constants.
- The codemod should preserve the usage context and logical operations.

## Additional Information

Note that `fs.F_OK`, `fs.R_OK`, `fs.W_OK`, `fs.X_OK` constants were deprecated and reached Runtime status in Node.js v24.0.0. These constants were moved to `fs.constants` for better organization and consistency with other Node.js modules. Instead of using the constants directly on the fs module, developers should use `fs.constants.F_OK`, `fs.constants.R_OK`, `fs.constants.W_OK`, and `fs.constants.X_OK`.

These constants are used with `fs.access()` to test file accessibility and permissions, where F_OK tests for existence, R_OK for read permission, W_OK for write permission, and X_OK for execute permission.

## Examples

### Example 1: Basic file existence check

**Before:**

```js
const fs = require("node:fs");
fs.access("file.txt", fs.F_OK, (err) => {
  if (err) console.log("File does not exist");
  else console.log("File exists");
});
```

**After:**

```js
const fs = require("node:fs");
fs.access("file.txt", fs.constants.F_OK, (err) => {
  if (err) console.log("File does not exist");
  else console.log("File exists");
});
```

### Example 2: Multiple permission checks

**Before:**

```js
const fs = require("node:fs");
const mode = fs.R_OK | fs.W_OK;
fs.access("data.txt", mode, (err) => {
  if (!err) console.log("Can read and write");
});
```

**After:**

```js
const fs = require("node:fs");
const mode = fs.constants.R_OK | fs.constants.W_OK;
fs.access("data.txt", mode, (err) => {
  if (!err) console.log("Can read and write");
});
```

### Example 3: Synchronous access check

**Before:**

```js
const fs = require("node:fs");
try {
  fs.accessSync("script.sh", fs.X_OK);
  console.log("File is executable");
} catch (err) {
  console.log("File is not executable");
}
```

**After:**

```js
const fs = require("node:fs");
try {
  fs.accessSync("script.sh", fs.constants.X_OK);
  console.log("File is executable");
} catch (err) {
  console.log("File is not executable");
}
```

### Example 4: Promise-based access check

**Before:**

```js
const fs = require("node:fs").promises;
async function checkFile(path) {
  try {
    await fs.access(path, fs.R_OK | fs.W_OK);
    return true;
  } catch {
    return false;
  }
}
```

**After:**

```js
const fs = require("node:fs").promises;
async function checkFile(path) {
  try {
    await fs.access(path, fs.constants.R_OK | fs.constants.W_OK);
    return true;
  } catch {
    return false;
  }
}
```

### Example 5: ESM import usage

**Before:**

```js
import { access, F_OK, R_OK } from "node:fs";
access("config.json", F_OK | R_OK, (err) => {
  if (!err) console.log("Config file is readable");
});
```

**After:**

```js
import { access, constants } from "node:fs";
access("config.json", constants.F_OK | constants.R_OK, (err) => {
  if (!err) console.log("Config file is readable");
});
```

### Example 6: Function with permission constants

**Before:**

```js
const fs = require("node:fs");
function checkPermissions(file, readable = true, writable = false) {
  let mode = fs.F_OK;
  if (readable) mode |= fs.R_OK;
  if (writable) mode |= fs.W_OK;
  return fs.access(file, mode);
}
```

**After:**

```js
const fs = require("node:fs");
function checkPermissions(file, readable = true, writable = false) {
  let mode = fs.constants.F_OK;
  if (readable) mode |= fs.constants.R_OK;
  if (writable) mode |= fs.constants.W_OK;
  return fs.access(file, mode);
}
```

## Refs

- [DEP0176: `fs.F_OK`, `fs.R_OK`, `fs.W_OK`, `fs.X_OK`](https://nodejs.org/api/deprecations.html#dep0176)