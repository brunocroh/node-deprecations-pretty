# Passing args to node:child_process execFile/spawn with shell option true

## Description

Since passing `args` to `node:child_process` `execFile`/`spawn` with `shell` option `true` is deprecated (DEP0190) and has reached Runtime status, we should provide a codemod to replace it.

- The codemod should detect when `args` array is passed with `{ shell: true }` to execFile or spawn.
- The codemod should concatenate command and args into a single command string when shell is true.
- The codemod should properly escape arguments to prevent shell injection.
- The codemod should handle both CommonJS and ESM imports.

## Additional Information

Note that passing an `args` array to `child_process.execFile` or `child_process.spawn` with the option `{ shell: true }` was deprecated and reached Runtime status in Node.js v24.0.0. When an `args` array is passed with `{ shell: true }`, the values are not escaped, only space-separated, which can lead to shell injection vulnerabilities. Instead of passing separate arguments, developers should construct a single command string with proper escaping, or use `{ shell: false }` to avoid shell interpretation altogether.

This deprecation addresses a significant security concern where user input in the args array could be exploited for command injection attacks.

## Examples

### Example 1: execFile with shell true and args

**Before:**

```js
const { execFile } = require("node:child_process");
execFile("echo", ["hello", "world"], { shell: true }, callback);
```

**After:**

```js
const { execFile } = require("node:child_process");
execFile("echo hello world", { shell: true }, callback);
```

### Example 2: spawn with shell true and args

**Before:**

```js
const { spawn } = require("node:child_process");
const child = spawn("ls", ["-la", "/tmp"], { shell: true });
```

**After:**

```js
const { spawn } = require("node:child_process");
const child = spawn("ls -la /tmp", { shell: true });
```

### Example 3: Properly escape arguments with quotes

**Before:**

```js
const { execFile } = require("node:child_process");
execFile("grep", ["hello world", "file.txt"], { shell: true }, callback);
```

**After:**

```js
const { execFile } = require("node:child_process");
execFile("grep \"hello world\" file.txt", { shell: true }, callback);
```

### Example 4: Alternative - disable shell to keep args

**Before:**

```js
const { spawn } = require("node:child_process");
const child = spawn("node", ["script.js", "--verbose"], { shell: true });
```

**After:**

```js
const { spawn } = require("node:child_process");
const child = spawn("node", ["script.js", "--verbose"], { shell: false });
```

### Example 5: ESM import usage

**Before:**

```js
import { execFile } from "node:child_process";
execFile("cat", ["file1.txt", "file2.txt"], { shell: true }, callback);
```

**After:**

```js
import { execFile } from "node:child_process";
execFile("cat file1.txt file2.txt", { shell: true }, callback);
```

### Example 6: execFileSync with shell and args

**Before:**

```js
const { execFileSync } = require("node:child_process");
const result = execFileSync("wc", ["-l", "data.txt"], { shell: true });
```

**After:**

```js
const { execFileSync } = require("node:child_process");
const result = execFileSync("wc -l data.txt", { shell: true });
```

## Refs

- [DEP0190: Passing `args` to `node:child_process` `execFile`/`spawn` with `shell` option `true`](https://nodejs.org/api/deprecations.html#dep0190)